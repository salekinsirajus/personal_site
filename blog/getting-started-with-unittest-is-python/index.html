<!doctype html>
<head>
    <meta charset="utf-8"> 
    <meta http-equiv="X-UA_compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <!--<link rel="stylesheet" href="/static/style.css"> -->
    <!-- Adding bootstrap stylesheets-->
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <!-- Social icons -->
    <link rel="stylesheet" href="/css/bootstrap-social.css?h=59ad44bd">
    <!-- Adding font-awesome -->
    <link rel="stylesheet" href="/font-awesome-4.7.0/css/font-awesome.min.css?h=512c7d79">
    <!-- Custom styles on top of bootstrap -->
    <link rel="stylesheet" href="/css/custom_styles.css">

    <title>Getting Started with unittest in Python â€” Sirajus Salekin</title>

</head>

<body class="container-fluid"> 
    <div class="ga-script"> 
<div id="ga-script"></div>
<script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-38237304-1', 'auto');
        ga('send', 'pageview');
</script>
 </div>
    <!-- header class used to be a row, stacked on top of the body and footer -->
    <!-- We're gonna try using that as fixed navbar instead -->
    <header class= "row"> <!-- row-->
        <div class="container">
            <nav class="nav navbar-fixed-top">
                <div class="row">
                    <h1 class="text-center" href="/">SIRAJUS SALEKIN</h1>
                </div>
                <div class="row">
                    <div class= "col-sm-8 col-sm-offset-2">
                        <ul class="nav nav-pills nav-justified">
                        <li><a href="/">Home</a></li>
                            
                        <li class=""><a href="/blog/">Blog</a></li>
                            
                        <li><a href="/projects/">Projects</a></li>
                            
                        <li><a href="/about/">About</a></li>
                            
                        </ul>
                    </div>
                </div>
            </nav>
        </div> <!-- container div -->
    </header>

    <div class="page row">
        <div class ="col-sm-3" >
        </div>
        <div class="col-sm-6" id="text_body">
            

  
  <div class="blog-post">
  
    <h2>Getting Started with unittest in Python</h2>
  
  <p class="meta">
    written by
    
      <a href="https://twitter.com/sirsalekin">Sirajus Salekin</a>
    
    on 2018-02-15
  </p>
  <p>I have a confession to make first: I should have started using unittests more seriously a while ago. Sure, I would use a something like a <code>tmp.py</code> and test the script with a bunch of different inputs and make sure they all work. But this does not make sure you take care of all--or at least the critical ones--and don't break the program trying to fix another bug. Anyway, I encountered a bunch of problems while trying to get started with unittesting. And there weren't many examples out there that I could follow: most of them either are too simplistic, or too complex. So I thought I would write a post on this for someone in my shoes who might find this useful.</p>
<p>Unit testing is basically testing the small components of a system (e.g, a function) in isolation, so it does not test how the components fit together (for that, look into <a href="https://en.wikipedia.org/wiki/Integration_testing">integration testing</a>).</p>
<p>Anyway, I needed to test a class and the methods, and after some googling, I could not find many examples or resources that go beyond testing a simple function such as <code>is_prime()</code>. But I needed something a bit more complex. This is how my class looked like:</p>
<pre><code class="lang-python">class Board(object):

    def __init__(self, list2d):
        self.board = list2d
        self.playerO = &#39;O&#39;
        self.playerX = &#39;X&#39;

    def is_valid(self, src, dst):
        &#39;&#39;&#39;Checking to see if it&#39;s possible to move from src to dst.&#39;&#39;&#39;
        try:
            (x,y) = src
            (a,b) = dst
            srcSym = self.get_sym(src)
            dstSym = self.get_sym(dst)
            .
            .
            .
            if dstSym == srcSym:
                print(&quot;&quot;)
                return False
                 else:
                return True
        except IndexError as e:
            print (&quot;out of the board {0} {1}&quot;.format(dst, e))
            return False

    def get_sym(self, position):
        try:
            (x, y) = position
            .
            .
            .
        except IndexError:
            return None

    def get_direction(self, posit):
        pass

    def get_moves(self, posit):
        try:
            (x,y) = posit
            direction = self.get_direction(posit)
            all_moves = []
            valid_moves = []
             .
             .
             .
            return valid_moves
        except TypeError:
            print(&quot;Invalid position, TypeError raised.&quot;)
            return []


    def move_forward(self, posit):
        # identify the destination
        # validate move
        # return success or failure
        pass

    def move_dright(self, posit):
        pass

    def move_dleft(self, posit):
        pass
</code></pre>
<p>Don't worry about understanding all the methods (plus I omitted part of the code, to keep things short and simple). To test these methods, I needed to initialize some data structure,i.e., two-dimensional lists, so I can use them for all the methods. So first things first, import the <code>unittest</code> module. It comes with standard python installations. Then you create a class by subclassing <code>unittest.TestCase</code>.  Finally, you call the <code>unittest.main()</code> under the <code>if __name__=='__main__':</code> . So I came up with the following initially.:</p>
<pre><code class="lang-python">import unittest
from transition import Board

class TestBoardMethods(unittest.TestCase):

    def __init__(self):
        self.threeX3List = [[&#39;x&#39;,&#39;x&#39;,&#39;x&#39;],
                            [&#39;.&#39;,&#39;.&#39;,&#39;.&#39;],
                            [&#39;o&#39;,&#39;o&#39;, &#39;o&#39;],
                            ]
        self.threeX3Board = Board(self.threeX3List

    def test_is_valid_false(self):
        pairs_false = [[(0,0),(0,0)],    # False, src = dst
                        [(0,0),(0,2)],   # False, two units, same row
                        [(0,0),(-1,0)],  # False, out of index
                        [(0,0),(0,1)],   # False, same row
                        [(0,0),(1,-1)],  # False, out of index
                        [(0,0),(1,2)],   # False, moving two units
                        [(0,0),(2,0)],   # False, moving two units
                        [(0,0),(2,2)],   # False, moving two units
                        [(0,0),(11,11)]  # False, out of index
                        ]
        for pair in pairs_false:
            with self.subTest(pair=pair):
                self.assertIs(self.threeX3Board.is_valid(pair[0],pair[1]), False)

if __name__ == &#39;__main__&#39;:
    unittest.main()
</code></pre>
<p>This gave me an error:</p>
<pre><code>TypeError: __init__() takes 1 positional argument but 2 were given
</code></pre>
<p>So turns out having a <code>__init__</code> method is not a good way to go. I later figured out that the <code>unittest</code>
has these methods called <code>setUp</code> and <code>tearDown</code> methods for such cases. So I turned the script
into the following:</p>
<pre><code class="lang-python">import unittest
from transition import Board

class TestBoardMethods(unittest.TestCase):

    def setUp(self):
        self.threeX3List = [[&#39;x&#39;,&#39;x&#39;,&#39;x&#39;],
                            [&#39;.&#39;,&#39;.&#39;,&#39;.&#39;],
                            [&#39;o&#39;,&#39;o&#39;, &#39;o&#39;],
                            ]
        self.threeX3Board = Board(self.threeX3List)

    def tearDown(self):
        pass

    def test_is_valid_false(self):
        pairs_false = [[(0,0),(0,0)],    # False, src = dst
                        [(0,0),(0,2)],   # False, two units, same row
                        [(0,0),(-1,0)],  # False, out of index
                        [(0,0),(0,1)],   # False, same row
                        [(0,0),(1,-1)],  # False, out of index
                        [(0,0),(1,2)],   # False, moving two units
                        [(0,0),(2,0)],   # False, moving two units
                        [(0,0),(2,2)],   # False, moving two units
                        [(0,0),(11,11)]  # False, out of index
                        ]
        for pair in pairs_false:
            with self.subTest(pair=pair):
                self.assertIs(self.threeX3Board.is_valid(pair[0],pair[1]), False)

if __name__ == &#39;__main__&#39;:
    unittest.main()
</code></pre>
<p>Before a test is run, the unittest method runs the <code>setUp</code> method. After it is done running a test, <code>unittest</code>
runs the <code>tearDown</code> method. In my case, <code>tearDown</code> wasn't super useful, but it is a very useful method when
it comes to things like closing a connection or a port.</p>
<p>When I thought about writing this post, my goal was to help you waste less time trying to find a code
example to get started with. So I'm going to basically list things that I learned while using the <code>unittest</code> module.
Hope someone finds this useful.</p>
<ul>
<li>To test if some value is exactly<code>False</code> or <code>True</code>, use <code>AssertIs(val, False)</code> instead of <code>AssertFalse</code> or <code>AssertTrue</code>. This is explained well <a href="http://jamescooke.info/python-unittest-asserttrue-is-truthy-assertfalse-is-falsy.html">here</a>.</li>
<li>Use  <code>subTest</code> when running a bunch of assertion off a list. It shows exactly for which item did the test fail.</li>
<li>On the same note as above, use highly descriptive names for each test.</li>
</ul>
<p>That's all I could think of right now, in terms of the difficulties I had using this library. If I remember more, I will
add them here. A bunch of great pieces of advice are posted <a href="http://docs.python-guide.org/en/latest/writing/tests/">here</a> on unittesting.</p>

  </div>


  <hr>  
  <div class="">
    </center>
        <a href="">
            <span class="fa fa-facebook-square facebook-button fa-3x"></span>
        </a>
        <a href="">
            <span class="fa fa-twitter-square twitter-button fa-3x"></span>
        </a>
        <a href="">
            <span class="fa fa-linkedin-square linkedin-button fa-3x"></span>
        </a>
        <a href="">
            <span class="fa fa-pinterest-square pinterest-button fa-3x"></span>
        </a>
        <a href="">
            <span class="fa fa-google-plus-square google-plus-button fa-3x"></span>
        </a>
    </center>
    
    <hr>
    <ul class="pager">
    

    
        <li class="next"><a href="/blog/mixing-of-markdown-and-html/">
            Markdown and HTML codes mixed</a>
        </li>
    
    </ul>
    
  <hr>
  <div class="comments"> 
<div id="disqus_thread"></div>
<script>
  var disqus_config = function() { this.page.identifier = "/blog/getting-started-with-unittest-is-python"; this.page.url = "https://sirajussalekin.com/blog/getting-started-with-unittest-is-python/"; };
  (function() {
    var d = document, s = d.createElement('script');
    s.src = '//sirajsussalekin.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>
  Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript"
    rel="nofollow">comments powered by Disqus.</a>
</noscript>
  </div>
  <hr>
  </div>

            
        </div>
        <div class="col-sm-3">
        </div>
    </div>
    <!-- find a better way to align the rows instead of fixing it to the bottom -->
    <div class="footer row navbar">
        <div class ="col-sm-5"> 
            <h5 class="text-right">NAVIGATION</h5>
            <ul class="list-group text-right">
                    
                    <li class="list-group-item">
                        <a href="/">Home</a>
                    
                    <li class="list-group-item">
                        <a href="/blog/">Blog</a>
                    
                    <li class="list-group-item">
                        <a href="/projects/">Projects</a>
                    
                    <li class="list-group-item">
                        <a href="/about/">About</a>
                    
                    </li>
            </ul>
        </div>

        <div class="col-sm-2">
            <h5 class="text-center">SOCIAL</h5>
            <a class="btn btn-block  btn-social btn-twitter"
               href="http://twitter.com/sirsalekin"
                >
                <span class="fa fa-twitter" aria-hidden="true"></span>
                Follow on Twitter
            </a>
            <a class="btn btn-block  btn-social btn-linkedin" 
               href="https://www.linkedin.com/in/sisalekin" 
                >
                <span class="fa fa-linkedin fa-4x" aria-hidden="true"></span>
                Connect on LinkedIn
            </a>
            <a class="btn btn-block  btn-social btn-github" 
               href="https://github.com/salekinsirajus"
                >
                <span class="fa fa-github fa-4x" aria-hidden="true"></span>
                Checkout GitHub repos
            </a>
            <a class="btn btn-block btn-social btn-flickr"
               href="https://www.flickr.com/people/156070616@N07/"
                >
                <span class="fa fa-flickr fa-4x"></span>
                Follow on Flickr
            </a>
        </div>

        <div class="col-sm-5">
            <!-- Add stuff later -->
            <h5 class="">CONTACT</h5>
            
        </div>
    </div>
</body>
